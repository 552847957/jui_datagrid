/**
 * jquery plugin which displays data in tabular format (datagrid)
 * Requires jquery, jquery-ui, jquery-ui themes
 * It uses jui_dropdown and jui_pagination plugin
 * Copyright 2012 Christos Pontikis http://pontikis.net
 * Project page https://github.com/pontikis/jui_datagrid
 * UPCOMING Release: 1.00 (?? Nov 2012)
 * License MIT
 * Minified using Online YUI Compressor http://www.refresh-sf.com/yui/
 */
"use strict";(function(k){var c="jui_datagrid",m="jui_datagrid_status";var x={init:function(z){var A=this;return this.each(function(){var F=A.data(c);if(typeof(F)==="undefined"){var H=A.jui_datagrid("getDefaults");F=k.extend({},H,z)}else{F=k.extend({},F,z)}A.data(c,F);if(typeof A.data(m)==="undefined"){A.data(m,{});A.data(m)["a_selected_ids"]=[];A.data(m)["count_selected_ids"]=0;if(k.browser.mozilla||(k.browser.msie&&parseInt(k.browser.version)>=10)){A.data(m)["fix_border_collapse_td_width"]=0}else{A.data(m)["fix_border_collapse_td_width"]=F.fix_border_collapse_td_width}}if(F.rowSelectionMode=="single"||F.rowSelectionMode==false){A.data(m)["a_selected_ids"]=[];A.data(m)["count_selected_ids"]=0}var I=A.attr("id");A.unbind("onCellClick").bind("onCellClick",F.onCellClick);A.unbind("onRowClick").bind("onRowClick",F.onRowClick);A.unbind("onDelete").bind("onDelete",F.onDelete);A.unbind("onDisplay").bind("onDisplay",F.onDisplay);var B=r(F.caption_id_prefix,I),D=r(F.datagrid_header_id_prefix,I),N=r(F.datagrid_id_prefix,I),O=r(F.tools_id_prefix,I),J=r(F.pagination_id_prefix,I),G=r(F.pref_dialog_id_prefix,I),K;if(!A.data(m)["initialize"]){K='<div id="'+B+'">'+F.caption+"</div>";K+='<div id="'+D+'"></div>';K+='<div id="'+N+'"></div>';K+='<div id="'+O+'"></div>';K+='<div id="'+J+'"></div>';K+='<div id="'+G+'"></div>';A.html(K);A.data(m)["initialize"]=true}var L=k("#"+B),Q=k("#"+D),E=k("#"+N),P=k("#"+O),C=k("#"+J),M=k("#"+G);A.removeClass().addClass(F.containerClass);if(typeof F.caption==="undefined"){L.hide()}else{L.show().text(F.caption).removeClass().addClass(F.captionClass)}Q.removeClass().addClass(F.datagridHeaderClass);E.removeClass().addClass(F.datagridClass);P.removeClass().addClass(F.toolsClass);C.removeClass().addClass(F.paginationClass);k.ajax({type:"POST",url:F.ajaxFetchDataURL,data:{page_num:F.pageNum,rows_per_page:F.rowsPerPage,sorting:F.sorting},success:function(an){var Z=k.parseJSON(an);var ab=Z.row_primary_key;var X=Z.total_rows;var ag=Z.page_data;if(X==0){w(I);h(I,X)}else{a(I,X,ag,ab);p(I);n(I,ab);h(I,X,ab);d(I,X)}var ai,W,aa,ac;if(X>0){var ad=r(A.jui_datagrid("getOption","table_id_prefix"),I),U=k("#"+ad),af,ae;ac=(ad+"_tr_").length;ai="tbody tr td";U.off("click",ai).on("click",ai,function(){af=k(this).index()+1;ae=k(this).parent("tr").index()+1;A.triggerHandler("onCellClick",{col:af,row:ae})});ai="tbody tr";U.off("click",ai).on("click",ai,function(){if(F.rowSelectionMode!=false){if(ab){var aq=parseInt(k(this).attr("id").substr(ac)),ap;if(F.rowSelectionMode=="single"){i(I)}var ao=k.inArray(aq,A.data(m)["a_selected_ids"]);if(ao>-1){u(I,aq,ao);ap="deselected"}else{y(I,aq);ap="selected"}f(I)}}A.triggerHandler("onRowClick",{row_id:aq,row_status:ap})})}if(F.showPrefButton){ai="#"+r(F.tools_id_prefix,I)+"_pref";A.off("click",ai).on("click",ai,function(){g(I,G);var ao=r(F.pref_tabs_id_prefix,I);k("#"+ao).tabs({create:function(ap,aq){k("#"+ao+" li a").blur()},activate:function(ap,aq){k("#"+ao+" li a").blur()}})});var ak,S,aj;ak=["_row_numbers"];S=["showRowNumbers"];for(aj in ak){j(A,M,"#"+G+ak[aj],S[aj])}ak=["_btn_select","_btn_refresh","_btn_delete","_btn_print","_btn_export","_btn_sorting","_btn_filters"];S=["showSelectButtons","showRefreshButton","showDeleteButton","showPrintButton","showExportButton","showSortingButton","showFiltersButton"];for(aj in ak){j(A,M,"#"+G+ak[aj],S[aj])}ak=["_slider","_goto_page","_rows_per_page","_rows_info","_nav_buttons"];S=["useSlider","showGoToPage","showRowsPerPage","showRowsInfo","showNavButtons"];for(aj in ak){e(A,M,"#"+G+ak[aj],S[aj])}}if(F.showSelectButtons&&F.rowSelectionMode=="multiple"&&ab){ac=(ad+"_tr_").length;var T=k("#"+ad+" tbody tr");W=r(A.jui_datagrid("getOption","tools_id_prefix"),I);aa=W+"_drop_select";var V={all_in_page:1,none_in_page:2,inv_in_page:3,none:4};k("#"+aa).jui_dropdown({onSelect:function(ap,aq){var ao=aq.index;switch(ao){case V.all_in_page:case V.none_in_page:case V.inv_in_page:T.each(function(){var at=parseInt(k(this).attr("id").substr(ac));var ar=k.inArray(at,A.data(m)["a_selected_ids"]);if(ao==V.all_in_page){if(ar>-1){}else{y(I,at)}}else{if(ao==V.none_in_page){if(ar>-1){u(I,at,ar)}}else{if(ao==V.inv_in_page){if(ar>-1){u(I,at,ar)}else{y(I,at)}}}}});break;case V.none:i(I);break}f(I)}})}if(F.showRefreshButton){ai="#"+r(F.tools_id_prefix,I)+"_refresh";A.off("click",ai).on("click",ai,function(){k("#"+I).jui_datagrid("refresh")})}if(F.showDeleteButton&&ab){ai="#"+r(F.tools_id_prefix,I)+"_delete";A.off("click",ai).on("click",ai,function(){A.triggerHandler("onDelete")})}if(X>0){var ah=F.pageNum,Y=F.rowsPerPage,R=F.maxRowsPerPage,am=k("#"+J),al=A.jui_datagrid("getPaginationOption","showRowsInfo");am.jui_pagination({onSetRowsPerPage:function(ao,ap){if(isNaN(ap)||ap<=0){A.jui_datagrid("refresh")}else{R=parseInt(R);if(R>0){if(ap>R){ap=R}}A.jui_datagrid({pageNum:1,rowsPerPage:ap})}},onChangePage:function(ap,ao){A.jui_datagrid({pageNum:ao})},onDisplay:function(){if(al){var ao=((ah-1)*Y)+1,ap=Math.min(ao+Y-1,X),aq=ao+"-"+ap+" "+rsc_jui_dg.rows_info_of+" "+X+" "+rsc_jui_dg.rows_info_records;k(this).jui_pagination("setRowsInfo",aq)}}})}A.triggerHandler("onDisplay")}})})},getDefaults:function(){return{columns:[{field:"",visible:"no",header:"",headerClass:"",dataClass:""}],sorting:[{sortingName:"",field:"",order:""}],filters:[{filterName:"",filterType:"",field:"",operator:"",value:"",value_range:{lower:"",upper:""},value_array:[],foreignKey:{ref_table:"",ref_pk:"",ref_col:"",condition:""},ajax_autocomplete_url:""}],pageNum:1,rowsPerPage:10,maxRowsPerPage:100,rowSelectionMode:"multiple",autoSetColumnsWidth:true,showRowNumbers:false,showPrefButton:true,showSelectButtons:true,showRefreshButton:true,showDeleteButton:true,showPrintButton:true,showExportButton:true,showSortingButton:true,showFiltersButton:true,showPrefButtonText:false,showRefreshButtonText:false,showDeleteButtonText:false,showPrintButtonText:false,showExportButtonText:false,showSortingButtonText:false,showFiltersButtonText:false,dropdownSelectOptions:{menuClass:"dropdown_select_menu",launcherClass:"dropdown_select_launcher"},usePagination:true,paginationOptions:{visiblePageLinks:5,useSlider:true,showGoToPage:false,showRowsPerPage:true,showRowsInfo:true,showPreferences:false,disableSelectionNavPane:true},containerClass:"grid_container ui-state-default ui-corner-all",captionClass:"grid_caption ui-widget-header ui-corner-top",datagridHeaderClass:"grid_header ui-state-default",datagridClass:"grid_data ui-widget-content",toolsClass:"grid_tools ui-state-default ui-corner-all",paginationClass:"grid_pagination",headerTableClass:"grid_header_table",dataTableClass:"grid_data_table",trHoverTrClass:"",trHoverTdClass:"ui-state-hover",thClass:"grid_th_common ui-state-default",tdClass:"grid_td_common ui-widget-content",rowIndexHeaderClass:"",rowIndexClass:"",selectedTrTrClass:"",selectedTrTdClass:"ui-state-highlight",tbButtonContainer:"tbBtnContainer",tbPrefIconClass:"ui-icon-gear",tbRefreshIconClass:"ui-icon-refresh",tbDeleteIconClass:"ui-icon-trash",tbPrintIconClass:"ui-icon-print",tbExportIconClass:"ui-icon-extlink",tbSortingIconClass:"ui-icon ui-icon-carat-2-n-s",tbFiltersIconClass:"ui-icon-search",caption_id_prefix:"caption_",datagrid_header_id_prefix:"dgh_",datagrid_id_prefix:"dg_",table_id_prefix:"tbl_",header_table_id_prefix:"tblh_",tools_id_prefix:"tools_",pagination_id_prefix:"pag_",pref_dialog_id_prefix:"pref_dlg_",pref_tabs_id_prefix:"pref_tabs_",fix_border_collapse_td_width:1,onCellClick:function(){},onRowClick:function(){},onDelete:function(){},onDisplay:function(){}}},getOption:function(z){var A=this;return A.data(c)[z]},getAllOptions:function(){var z=this;return z.data(c)},setOption:function(z,C,B){var A=this;A.data(c)[z]=C;if(B){A.jui_datagrid("init")}},refresh:function(){var z=this;z.jui_datagrid()},destroy:function(){return k(this).each(function(){var B=k(this),A=B.attr("id"),z=B.jui_datagrid("getOption","pagination_id_prefix")+A;k("#"+z).removeData();B.removeData()})},getSelectedIDs:function(){var z=this;return z.data(m)["a_selected_ids"]},getGridElemTableID:function(){var z=this;return r(z.jui_datagrid("getOption","table_id_prefix"),z.attr("id"))},getGridElemHeaderTableID:function(){var z=this;return r(z.jui_datagrid("getOption","header_table_id_prefix"),z.attr("id"))},setPageColClass:function(E,C,G,z){var D=this,F=D.attr("id"),B="#"+r(D.jui_datagrid("getOption","header_table_id_prefix"),F),A="#"+r(D.jui_datagrid("getOption","table_id_prefix"),F);k(B+" th").eq(E).addClass(C);k(A+" tr").each(function(){k(this).find("td").eq(E).addClass(G)});if(z){t(F)}},removePageColClass:function(E,C,G,z){var D=this,F=D.attr("id"),B="#"+r(D.jui_datagrid("getOption","header_table_id_prefix"),F),A="#"+r(D.jui_datagrid("getOption","table_id_prefix"),F);k(B+" th").eq(E).removeClass(C);k(A+" tr").each(function(){k(this).find("td").eq(E).removeClass(G)});if(z){t(F)}},getPaginationOption:function(B){var A=this.attr("id"),z=k("#"+A).jui_datagrid("getOption","pagination_id_prefix")+A;return k("#"+z).jui_pagination("getOption",B)},getAllPaginationOptions:function(){var A=this.attr("id"),z=k("#"+A).jui_datagrid("getOption","pagination_id_prefix")+A;return k("#"+z).jui_pagination("getAllOptions")}};var r=function(A,z){return A+z};var b=function(z){return(k("#"+z).length===0?false:true)};var s=function(z,C,B,A){z.button({label:C,text:B,icons:{primary:A}})};var q=function(z,A){if(!b(z)){return false}else{return(typeof k("#"+z).data(A)==="object"?true:false)}};var e=function(B,A,z,C){A.off("click",z).on("click",z,function(){var D={};D[C]=k(this).is(":checked");B.jui_datagrid({paginationOptions:D})})};var j=function(B,A,z,C){A.off("click",z).on("click",z,function(){var D={};D[C]=k(this).is(":checked");B.jui_datagrid(D)})};var o=function(z,A){var B;B="<li>";B+='<input type="checkbox" id="'+z+'" /><label for="'+z+'">'+A+"</label>";B+="</li>";return B};var l=function(G){var A=k("#"+G);var E=A.jui_datagrid("getOption","pref_dialog_id_prefix");var C=r(E,G);E=A.jui_datagrid("getOption","pref_tabs_id_prefix");var H=r(E,G);var B="";B+='<div id="'+H+'">';B+="<ul>";B+='<li><a href="#'+H+'_grid">'+rsc_jui_dg.pref_tab_grid+"</a></li>";B+='<li><a href="#'+H+'_tools">'+rsc_jui_dg.pref_tab_tools+"</a></li>";B+='<li><a href="#'+H+'_nav">'+rsc_jui_dg.pref_tab_nav+"</a></li>";B+="</ul>";B+='<div id="'+H+'_grid">';B+='<ul style="list-style-type: none;">';B+=o(C+"_row_numbers",rsc_jui_dg.pref_show_row_numbers);B+="</ul>";B+="</div>";B+='<div id="'+H+'_tools">';B+='<ul style="list-style-type: none;">';B+=o(C+"_btn_select",rsc_jui_dg.pref_show_select);B+=o(C+"_btn_refresh",rsc_jui_dg.pref_show_refresh);B+=o(C+"_btn_delete",rsc_jui_dg.pref_show_delete);B+=o(C+"_btn_print",rsc_jui_dg.pref_show_print);B+=o(C+"_btn_export",rsc_jui_dg.pref_show_export);B+=o(C+"_btn_sorting",rsc_jui_dg.pref_show_sorting);B+=o(C+"_btn_filters",rsc_jui_dg.pref_show_filters);B+="</ul>";B+="</div>";B+='<div id="'+H+'_nav">';B+='<ul style="list-style-type: none;">';B+=o(C+"_slider",rsc_jui_pag.pref_show_slider);B+=o(C+"_goto_page",rsc_jui_pag.pref_show_goto_page);B+=o(C+"_rows_per_page",rsc_jui_pag.pref_show_rows_per_page);B+=o(C+"_rows_info",rsc_jui_pag.pref_show_rows_info);B+=o(C+"_nav_buttons",rsc_jui_pag.pref_show_nav_buttons);B+="</ul>";B+="</div>";B+="</div>";k("#"+C).html(B);var z,F,D;z=["_row_numbers"];F=["showRowNumbers"];for(D in z){k("#"+C+z[D]).attr("checked",A.jui_datagrid("getOption",F[D]))}z=["_btn_select","_btn_refresh","_btn_delete","_btn_print","_btn_export","_btn_sorting","_btn_filters"];F=["showSelectButtons","showRefreshButton","showDeleteButton","showPrintButton","showExportButton","showSortingButton","showFiltersButton"];for(D in z){k("#"+C+z[D]).attr("checked",A.jui_datagrid("getOption",F[D]))}z=["_slider","_goto_page","_rows_per_page","_rows_info","_nav_buttons"];F=["useSlider","showGoToPage","showRowsPerPage","showRowsInfo","showNavButtons"];for(D in z){k("#"+C+z[D]).attr("checked",A.jui_datagrid("getPaginationOption",F[D]))}};var g=function(z,A){var B=k("#"+A);if(q(A,"dialog")){B.dialog("destroy")}B.dialog({autoOpen:true,width:400,height:"auto",position:{my:"top",at:"top",of:"#"+z},title:rsc_jui_dg.preferences,buttons:[{text:rsc_jui_dg.preferences_close,click:function(){k(this).dialog("close");k(this).dialog("destroy")}}],open:l(z)})};var a=function(U,F,Q,J){var V=k("#"+U),B=V.jui_datagrid("getOption","columns"),W=parseInt(V.jui_datagrid("getOption","pageNum")),I=parseInt(V.jui_datagrid("getOption","rowsPerPage")),S=V.jui_datagrid("getOption","showRowNumbers"),A=Q.length,R=r(V.jui_datagrid("getOption","datagrid_header_id_prefix"),U),H=r(V.jui_datagrid("getOption","datagrid_id_prefix"),U),z=k("#"+R),N=k("#"+H),K=r(V.jui_datagrid("getOption","header_table_id_prefix"),U),M=r(V.jui_datagrid("getOption","table_id_prefix"),U),X,T,E,C,P,G,O,L,D;D=((W-1)*I);P="";P+='<table id="'+K+'">';P+="<thead>";X=(J?' id="'+K+'_tr_0"':"");P+="<tr"+X+">";if(S){P+="<th>"+rsc_jui_dg.row_index_header+"</th>"}for(T in B){if(B[T].visible=="yes"){P+="<th>"+B[T].header+"</th>"}}P+="</tr>";P+="</thead>";P+="</table>";z.html(P);G="";G+='<table id="'+M+'">';G+="<tbody>";for(E in Q){X=(J?' id="'+M+"_tr_"+Q[E][J]+'"':"");G+="<tr"+X+">";if(S){L=D+parseInt(E)+1;G+="<td>"+L+"</td>"}for(T in B){if(B[T].visible=="yes"){G+="<td>"+Q[E][B[T].field]+"</td>"}}G+="</tr>"}G+="<tbody>";G+="</table>";N.html(G)};var p=function(K){var N=k("#"+K),C="#"+r(N.jui_datagrid("getOption","header_table_id_prefix"),K),P="#"+r(N.jui_datagrid("getOption","table_id_prefix"),K),M=k(C),L=k(P),Q=N.jui_datagrid("getOption","headerTableClass"),H=N.jui_datagrid("getOption","dataTableClass"),O=N.jui_datagrid("getOption","trHoverTrClass"),B=N.jui_datagrid("getOption","trHoverTdClass"),z=N.jui_datagrid("getOption","thClass"),G=N.jui_datagrid("getOption","tdClass"),A=N.jui_datagrid("getOption","columns"),I=N.jui_datagrid("getOption","showRowNumbers"),E,D,J,F;M.removeClass(Q).addClass(Q);M.find("th").removeClass(z).addClass(z);L.removeClass(H).addClass(H);L.find("td").removeClass(G).addClass(G);if(O!=""){L.on("mouseover mouseout","tbody tr",function(R){k(this).toggleClass(O,R.type=="mouseover")})}if(B!=""){L.on("mouseover mouseout","tbody tr",function(R){k(this).children().toggleClass(B,R.type=="mouseover")})}for(J in A){F=I?parseInt(J)+1:parseInt(J);E=A[J]["headerClass"];D=A[J]["dataClass"];N.jui_datagrid("setPageColClass",F,E,D,false)}t(K)};var n=function(F,H){if(H){var A=k("#"+F),E=A.jui_datagrid("getOption","rowSelectionMode"),G=A.jui_datagrid("getOption","selectedTrTrClass"),C=A.jui_datagrid("getOption","selectedTrTdClass"),D=r(A.jui_datagrid("getOption","table_id_prefix"),F),z=(D+"_tr_").length;if(E=="multiple"){var B="#"+D+" tbody tr";k(B).each(function(){var J=parseInt(k(this).attr("id").substr(z));var I=k.inArray(J,A.data(m)["a_selected_ids"]);if(I>-1){v(k(this),true,G,C)}})}else{i(F)}}else{i(F)}};var h=function(ac,N,W){var aq=k("#"+ac),ax=r(aq.jui_datagrid("getOption","tools_id_prefix"),ac),ak=aq.jui_datagrid("getOption","toolsClass"),al=aq.jui_datagrid("getOption","rowSelectionMode"),Y=aq.jui_datagrid("getOption","tbButtonContainer"),am=aq.jui_datagrid("getOption","showPrefButton"),ab=aq.jui_datagrid("getOption","showPrefButtonText"),F=aq.jui_datagrid("getOption","tbPrefIconClass"),an=aq.jui_datagrid("getOption","showSelectButtons"),aa=aq.jui_datagrid("getOption","showRefreshButton"),ap=aq.jui_datagrid("getOption","showRefreshButtonText"),E=aq.jui_datagrid("getOption","tbRefreshIconClass"),ar=aq.jui_datagrid("getOption","showDeleteButton"),S=aq.jui_datagrid("getOption","showDeleteButtonText"),ad=aq.jui_datagrid("getOption","tbDeleteIconClass"),H=aq.jui_datagrid("getOption","showPrintButton"),at=aq.jui_datagrid("getOption","showPrintButtonText"),L=aq.jui_datagrid("getOption","tbPrintIconClass"),ai=aq.jui_datagrid("getOption","showExportButton"),Q=aq.jui_datagrid("getOption","showExportButtonText"),U=aq.jui_datagrid("getOption","tbExportIconClass"),af=aq.jui_datagrid("getOption","showSortingButton"),aj=aq.jui_datagrid("getOption","showSortingButtonText"),C=aq.jui_datagrid("getOption","tbSortingIconClass"),K=aq.jui_datagrid("getOption","showFiltersButton"),ag=aq.jui_datagrid("getOption","showFiltersButtonText"),ah=aq.jui_datagrid("getOption","tbFiltersIconClass");var J="";if(am){J+='<div class="'+Y+'">';var A=ax+"_pref";J+='<button id="'+A+'">'+rsc_jui_dg.preferences+"</button>";J+="</div>"}if(N>0){if(an&&al=="multiple"&&W){var ao=ax+"_drop_select";var G=aq.data(m)["count_selected_ids"];J+='<div class="'+Y+'">';J+='<div id="'+ao+'">';J+='<div id="'+ao+'_launcher_container">';J+='<button id="'+ao+'_launcher">'+rsc_jui_dg.tb_selected_label+": "+G+"</button>";J+="</div>";J+='<ul id="'+ao+'_menu">';J+='<li id="'+ao+'_all_in_page"><a href="javascript:void(0);">'+rsc_jui_dg.tb_select_all_in_page+"</a></li>";J+='<li id="'+ao+'_none_in_page"><a href="javascript:void(0);">'+rsc_jui_dg.tb_select_none_in_page+"</a></li>";J+='<li id="'+ao+'_inv_in_page"><a href="javascript:void(0);">'+rsc_jui_dg.tb_select_inverse_in_page+"</a></li>";J+="<hr>";J+='<li id="'+ao+'_none"><a href="javascript:void(0);">'+rsc_jui_dg.tb_select_none+"</a></li>";J+="</ul>";J+="</div>";J+="</div>"}}if(aa){J+='<div class="'+Y+'">';var ay=ax+"_refresh";J+='<button id="'+ay+'">'+rsc_jui_dg.tb_refresh+"</button>";J+="</div>"}if(N>0){if(ar&&W){J+='<div class="'+Y+'">';var M=ax+"_delete";J+='<button id="'+M+'">'+rsc_jui_dg.tb_delete+"</button>";J+="</div>"}}if(N>0){if(H||ai){J+='<div class="'+Y+'">'}if(H){var R=ax+"_print";J+='<button id="'+R+'">'+rsc_jui_dg.tb_print+"</button>"}if(ai){var D=ax+"_export";J+='<button id="'+D+'">'+rsc_jui_dg.tb_export+"</button>"}if(H||ai){J+="</div>"}}if(af){J+='<div class="'+Y+'">';var P=ax+"_sorting";J+='<button id="'+P+'">'+rsc_jui_dg.tb_sorting+"</button>";J+="</div>"}if(K){J+='<div class="'+Y+'">';var X=ax+"_filters";J+='<button id="'+X+'">'+rsc_jui_dg.tb_filters+"</button>";J+="</div>"}k("#"+ax).html(J);if(am){s(k("#"+A),rsc_jui_dg.preferences,ab,F)}if(N>0){if(an&&al=="multiple"&&W){var B=k("#"+ao),Z=ao+"_launcher",O=ao+"_launcher_container",z=ao+"_menu",I=aq.jui_datagrid("getOption","dropdownSelectOptions"),V=["launcher_id","launcher_container_id","menu_id","onSelect"];for(var au in V){if(typeof(I[V[au]])!="undefined"){delete I[V[au]]}}var ae=B.data("jui_dropdown");if(typeof(ae)==="undefined"){var T=aq.jui_datagrid("getDefaults");var aw=T.dropdownSelectOptions;ae=k.extend({},aw,I)}else{ae=k.extend({},ae,I)}var av={launcher_id:Z,launcher_container_id:O,menu_id:z};ae=k.extend({},ae,av);B.jui_dropdown(ae)}}if(aa){s(k("#"+ay),rsc_jui_dg.tb_refresh,ap,E)}if(N>0){if(ar){s(k("#"+M),rsc_jui_dg.tb_delete,S,ad)}}if(N>0){if(H){s(k("#"+R),rsc_jui_dg.tb_print,at,L)}if(ai){s(k("#"+D),rsc_jui_dg.tb_export,Q,U)}}if(af){s(k("#"+P),rsc_jui_dg.tb_sorting,aj,C)}if(K){s(k("#"+X),rsc_jui_dg.tb_filters,ag,ah)}};var d=function(H,E){var D=k("#"+H),L=D.jui_datagrid("getOption","pageNum"),A=D.jui_datagrid("getOption","rowsPerPage"),F=D.jui_datagrid("getOption","maxRowsPerPage"),O=Math.ceil(E/A),z=D.jui_datagrid("getOption","paginationClass"),K=r(D.jui_datagrid("getOption","pagination_id_prefix"),H),C=k("#"+K),G=D.jui_datagrid("getOption","paginationOptions"),P=["currentPage","rowsPerPage","totalPages","containerClass","onSetRowsPerPage","onChangePage","onDisplay"];for(var J in P){if(typeof(G[P[J]])!="undefined"){delete G[P[J]]}}var M=C.data("jui_pagination");if(typeof(M)==="undefined"){var I=D.jui_datagrid("getDefaults");var N=I.paginationOptions;M=k.extend({},N,G)}else{M=k.extend({},M,G)}var B={currentPage:L,rowsPerPage:A,totalPages:O,containerClass:z};M=k.extend({},M,B);C.jui_pagination(M)};var w=function(C){var B=k("#"+C),A=B.jui_datagrid("getOption","datagrid_id_prefix")+C,z=B.jui_datagrid("getOption","pagination_id_prefix")+C;k("#"+A).html(rsc_jui_dg.no_records_found);k("#"+z).hide()};var v=function(B,A,C,z){if(A==true){if(C){B.addClass(C)}if(z){B.children("td").addClass(z)}}else{if(C){B.removeClass(C)}if(z){B.children("td").removeClass(z)}}};var y=function(B,C){var F=k("#"+B),A=F.jui_datagrid("getOption","table_id_prefix"),G=r(A,B),E=k("#"+G+"_tr_"+C),z=F.jui_datagrid("getOption","selectedTrTrClass"),D=F.jui_datagrid("getOption","selectedTrTdClass");F.data(m)["a_selected_ids"].push(C);F.data(m)["count_selected_ids"]+=1;v(E,true,z,D)};var u=function(G,A,C){var B=k("#"+G),D=B.jui_datagrid("getOption","table_id_prefix"),F=r(D,G),z=k("#"+F+"_tr_"+A),H=B.jui_datagrid("getOption","selectedTrTrClass"),E=B.jui_datagrid("getOption","selectedTrTdClass");B.data(m)["a_selected_ids"].splice(C,1);B.data(m)["count_selected_ids"]-=1;v(z,false,H,E)};var i=function(B){var E=k("#"+B),A=E.jui_datagrid("getOption","table_id_prefix"),F=r(A,B),D=k("#"+F),z=E.jui_datagrid("getOption","selectedTrTrClass"),C=E.jui_datagrid("getOption","selectedTrTdClass");E.data(m)["a_selected_ids"]=[];E.data(m)["count_selected_ids"]=0;D.find("tr").removeClass(z);D.find("td").removeClass(C)};var f=function(z){var B=k("#"+z),C=B.data(m)["count_selected_ids"],A=r(B.jui_datagrid("getOption","tools_id_prefix"),z),D=A+"_drop_select";k("#"+D+"_launcher").button({label:rsc_jui_dg.tb_selected_label+": "+C})};var t=function(E){var B=k("#"+E),z="#"+r(B.jui_datagrid("getOption","header_table_id_prefix"),E),C="#"+r(B.jui_datagrid("getOption","table_id_prefix"),E),M=k(z+" th").length,J=M-1,F,G,A,N=false,D,I,H,L,K=[],P=parseInt(B.data(m)["fix_border_collapse_td_width"]);for(F=0;F<J;F++){G=k(z+" th").eq(F).width();A=k(C).find("tr").eq(0).find("td").eq(F).width();if(G!==A){N=true;break}}if(N){k(z).addClass("shrink");for(F=0;F<M;F++){H=k(z).find("tr").eq(0).find("th").eq(F);I=H.width();L=k(C).find("tr").eq(0).find("td").eq(F);L.css("min-width",I+"px")}k(z).removeClass("shrink");for(F=0;F<J;F++){var O=k(C).find("tr").eq(0).find("td").eq(F);D=O.width()+P;K.push(D);k(z+" th").eq(F).width(D)}for(F=0;F<J;F++){k(C+" tr").eq(0).find("td").eq(F).width(K[F])}}};k.fn.jui_datagrid=function(A){if(this.size()!=1){var z="You must use this plugin ("+c+") with a unique element (at once)";this.html('<span style="color: red;">ERROR: '+z+"</span>");k.error(z)}if(x[A]){return x[A].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof A==="object"||!A){return x.init.apply(this,arguments)}else{k.error("Method "+A+" does not exist on jQuery."+c)}}}})(jQuery);